(function(t,e){"function"==typeof define&&define.amd?define([],function(){return e(t)}):"object"==typeof exports?module.exports=e(t):t.SuperSimpleAccordions=e(t)})("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(t){"use strict";function e(t,e){n.this=this,n.element=t,n.defaults=s,n.options=e,n.settings=i(s,e),n.this.init()}const n={},s={accordionClass:"accordion",headerClass:"accordion__title",contentClass:"accordion__content",panelClass:"accordion__panel",toggleBtnClass:"accordion__toggle",icons:!0,iconsSymbol:"plus-minus",iconsPosition:"left",expandAllBtn:!0,expandAllClass:"accordion__toggle-all",expandAllContainerClass:"accordion__toggle-all-container",expandSelectClass:"expanded",expandAllOpenText:"Expand All",expandAllCloseText:"Collapse All",expanded:!1},i=function(){var t=arguments.length;if(!(t<1)){if(t<2)return arguments[0];for(let e=1;e<t;e++)for(let t in arguments[e])"[object Object]"===Object.prototype.toString.call(arguments[e][t])?arguments[0][t]=i(arguments[0][t]||{},arguments[e][t]):arguments[0][t]=arguments[e][t];return arguments[0]}},a=function(t){const e=t;if(!0===n.settings.icons){const e=document.createElement("span");e.classList.add(n.settings.iconsSymbol),e.classList.add(n.settings.iconsPosition),t.appendChild(e)}else e.classList.add("icon-hidden")},l=function(t,e){const s=t.querySelector(`.${n.settings.panelClass}`);if(!s)return;const i=document.createElement("div");i.className=n.settings.contentClass,i.innerHTML=s.innerHTML,s.innerHTML="",s.appendChild(i),s.setAttribute("id",`accordion${e}`),!1===n.settings.expanded?(s.setAttribute("aria-hidden","true"),s.setAttribute("hidden",""),s.style.height="0px"):(s.setAttribute("aria-hidden","false"),s.removeAttribute("hidden"),s.style.height=`${s.scrollHeight}px`)},o=function(t,e){const s=t.querySelector(`.${n.settings.headerClass}`);if(!s)return;const i=document.createElement("button");i.className=n.settings.toggleBtnClass,i.setAttribute("aria-controls",`accordion${e}`),!1===n.settings.expanded?i.setAttribute("aria-expanded","false"):i.setAttribute("aria-expanded","true"),i.innerHTML=s.innerHTML,s.innerHTML="",s.appendChild(i),l(t,e),a(i)},r=function(){const t=document.querySelector(`.${n.settings.accordionClass}`);if(!t)return;const e=document.createElement("div");e.className=n.settings.expandAllContainerClass;const s=document.createElement("button");s.className=n.settings.expandAllClass,!1===n.settings.expanded?(s.setAttribute("aria-expanded","false"),s.textContent=n.settings.expandAllOpenText):(s.setAttribute("aria-expanded","true"),s.textContent=n.settings.expandAllCloseText),e.appendChild(s);const i=t.parentNode;i.insertBefore(e,t)},d=function(t,e){"expand"===e?t.setAttribute("aria-expanded","true"):t.setAttribute("aria-expanded","false")},c=function(t,e,n){function s(t){setTimeout(function(){t.style.height="auto"},300)}const i=t.getAttribute("aria-controls"),a=document.getElementById(i),l=(a.scrollHeight,a.getAttribute("aria-hidden"));e&&e.preventDefault(),"expand"===n&&"true"===l?(a.removeAttribute("hidden"),a.style.height=`${a.scrollHeight}px`,a.setAttribute("aria-hidden","false"),s(a)):"collapse"===n&&"false"===l&&(a.style.height=`${a.scrollHeight}px`,a.setAttribute("aria-hidden","true"),setTimeout(function(){a.setAttribute("aria-hidden",!0),a.style.height="0px"},50),setTimeout(function(){a.setAttribute("hidden","")},150)),d(t,n)},u=function(t,e,s){e&&e.preventDefault();const i=document.querySelectorAll(`.${n.settings.toggleBtnClass}`);Array.prototype.forEach.call(i,function(t){c(t,e,s)}),t.setAttribute("aria-expanded","true"===t.getAttribute("aria-expanded")?"false":"true"),t.textContent=t.textContent===n.settings.expandAllOpenText?t.textContent=n.settings.expandAllCloseText:t.textContent=n.settings.expandAllOpenText},p=function(t){const e=t.target.closest(`.${n.settings.toggleBtnClass}`),s=t.target.closest(`.${n.settings.expandAllClass}`);if(null!==e||null!==s){if(e){const s="true"===t.target.closest(`.${n.settings.toggleBtnClass}`).getAttribute("aria-expanded")?"collapse":"expand";c(e,t,s)}if(s){const e="true"===t.target.closest(`.${n.settings.expandAllClass}`).getAttribute("aria-expanded")?"collapse":"expand";u(s,t,e)}}},g=function(t){if("Enter"==t.key||" "==t.key){const e=t.target.closest(`.${n.settings.toggleBtnClass}`),s=t.target.closest(`.${n.settings.expandAllClass}`),i="true"===t.target.getAttribute("aria-expanded")?"collapse":"expand";e&&(t.preventDefault(),c(e,t,i)),s&&(t.preventDefault(),u(s,t,i))}};return e.prototype={setup(){const t=document.querySelectorAll(n.element);let e=0;Array.prototype.forEach.call(t,function(t){e+=1,o(t,e)}),n.settings.expandAllBtn&&t.length>1&&r()},init(){if(!n.element)return!1;n.this.setup(),document.addEventListener("click",p,!1),document.addEventListener("keydown",g,!1)}},e});