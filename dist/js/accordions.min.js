!function(root,factory){"function"==typeof define&&define.amd?define([],(function(){return factory(root)})):"object"==typeof exports?module.exports=factory(root):root.SuperSimpleAccordions=factory(root)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,(function(window){const plugin={},defaults={accordionClass:"accordion",headerClass:"accordion__title",contentClass:"accordion__content",panelClass:"accordion__panel",toggleBtnClass:"accordion__toggle",icons:!0,iconsSymbol:"plus-minus",iconsPosition:"left",expandAllBtn:!0,expandAllClass:"accordion__toggle-all",expandAllContainerClass:"accordion__toggle-all-container",expandSelectClass:"expanded",expandAllOpenText:"Expand All",expandAllCloseText:"Collapse All",expanded:!1};function Plugin(element,options){plugin.this=this,plugin.element=element,plugin.defaults=defaults,plugin.options=options,plugin.settings=Object.assign({},defaults,options),plugin.this.init()}const accordionIconSetup=function(toggle){const toggleBtn=toggle;if(!0===plugin.settings.icons){const iconContainer=document.createElement("span");iconContainer.classList.add(plugin.settings.iconsSymbol),iconContainer.classList.add(plugin.settings.iconsPosition),toggle.appendChild(iconContainer)}else toggleBtn.classList.add("icon-hidden")},accordionContentSetup=function(content,id){const accordionPanel=content.querySelector(`.${plugin.settings.panelClass}`),accordionContent=document.createElement("div");accordionContent.className=plugin.settings.contentClass,accordionContent.innerHTML=accordionPanel.innerHTML,accordionPanel.innerHTML="",accordionPanel.appendChild(accordionContent),accordionPanel.setAttribute("id",`accordion${id}`),accordionPanel.setAttribute("aria-hidden",!0),accordionPanel.style.height="0px"},accordionToggleSetup=function(content,btnId){const accordionHeader=content.querySelector(`.${plugin.settings.headerClass}`),toggle=document.createElement("button");toggle.className=plugin.settings.toggleBtnClass,toggle.setAttribute("aria-expanded",!1),toggle.setAttribute("aria-controls",`accordion${btnId}`),toggle.innerHTML=accordionHeader.innerHTML,accordionHeader.innerHTML="",accordionHeader.appendChild(toggle),accordionContentSetup(content,btnId),accordionIconSetup(toggle)},toggleAllSetup=function(){const firstAccordion=document.querySelector(`.${plugin.settings.accordionClass}`);if(!firstAccordion)return;const buttonContainer=document.createElement("div");buttonContainer.className=plugin.settings.expandAllContainerClass;const button=document.createElement("button");button.className=plugin.settings.expandAllClass,button.setAttribute("aria-expanded",!1),button.textContent=plugin.settings.expandAllOpenText,buttonContainer.appendChild(button);const parentContainer=firstAccordion.parentNode;parentContainer.insertBefore(buttonContainer,firstAccordion)},toggleButton=function(targetElem,direction){"expand"===direction?targetElem.setAttribute("aria-expanded","true"):targetElem.setAttribute("aria-expanded","false")},toggleAccordion=function(targetElem,event,direction){const controls=targetElem.getAttribute("aria-controls"),controlsElem=document.getElementById(controls),controlsElemHeight=controlsElem.scrollHeight,toggled=controlsElem.getAttribute("aria-hidden");function timeoutSet(element){setTimeout((function(){element.style.height="auto"}),300)}event&&event.preventDefault(),"expand"===direction&&"true"===toggled?(controlsElem.style.height=`${controlsElemHeight}px`,controlsElem.setAttribute("aria-hidden","false"),timeoutSet(controlsElem)):"collapse"===direction&&"false"===toggled&&(controlsElem.style.height=`${controlsElem.scrollHeight}px`,controlsElem.setAttribute("aria-hidden","true"),setTimeout((function(){controlsElem.setAttribute("aria-hidden",!0),controlsElem.style.height="0px"}),50)),toggleButton(targetElem,direction)},toggleAllAccordions=function(targetElem,event,direction){event&&event.preventDefault();const buttons=document.querySelectorAll(`.${plugin.settings.toggleBtnClass}`);Array.prototype.forEach.call(buttons,(function(button){toggleAccordion(button,event,direction)})),targetElem.setAttribute("aria-expanded","true"===targetElem.getAttribute("aria-expanded")?"false":"true"),targetElem.textContent=targetElem.textContent===plugin.settings.expandAllOpenText?targetElem.textContent=plugin.settings.expandAllCloseText:targetElem.textContent=plugin.settings.expandAllOpenText},clickHandler=function(event){const toggleBtn=event.target.closest(`.${plugin.settings.toggleBtnClass}`),toggleAll=event.target.closest(`.${plugin.settings.expandAllClass}`),direction="true"===event.target.getAttribute("aria-expanded")?"collapse":"expand";toggleBtn&&toggleAccordion(toggleBtn,event,direction),toggleAll&&toggleAllAccordions(toggleAll,event,direction)},keyboardHandler=function(event){if("Enter"==event.key||" "==event.key){event.preventDefault();const toggleBtn=event.target.closest(`.${plugin.settings.toggleBtnClass}`),toggleAll=event.target.closest(`.${plugin.settings.expandAllClass}`),direction="true"===event.target.getAttribute("aria-expanded")?"collapse":"expand";toggleBtn&&toggleAccordion(toggleBtn,event,direction),toggleAll&&toggleAllAccordions(toggleAll,event,direction)}};return Plugin.prototype={setup(){const accordions=document.querySelectorAll(plugin.element);let btnId=0;Array.prototype.forEach.call(accordions,(function(accordion){btnId+=1,accordionToggleSetup(accordion,btnId)})),plugin.settings.expandAllBtn&&accordions.length>1&&toggleAllSetup()},init(){if(!plugin.element)return!1;plugin.this.setup(),document.addEventListener("click",clickHandler,!1),document.addEventListener("keydown",keyboardHandler,!1)}},Plugin}));