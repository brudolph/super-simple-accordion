!function(root,factory){"function"==typeof define&&define.amd?define([],(function(){return factory(root)})):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=factory(root):root.SuperSimpleAccordions=factory(root)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,(function(window){"use strict";var plugin={},defaults={accordionClass:"accordion",headerClass:"accordion__title",contentClass:"accordion__content",panelClass:"accordion__panel",toggleBtnClass:"accordion__toggle",icons:!0,iconsSymbol:"plus-minus",iconsPosition:"left",expandAllBtn:!0,expandAllClass:"accordion__toggle-all",expandAllContainerClass:"accordion__toggle-all-container",expandSelectClass:"expanded",expandAllOpenText:"Expand All",expandAllCloseText:"Collapse All",expanded:!1};
/*!
    * Deep merge two or more objects into the first.
    * (c) 2019 Chris Ferdinandi, MIT License, https://gomakethings.com
    * @param   {Object} objects  The objects to merge together
    * @returns {Object}          Merged values of defaults and options
    */
const deepMerge=function(){var len=arguments.length;if(!(len<1)){if(len<2)return arguments[0];for(var i=1;i<len;i++)for(var key in arguments[i])"[object Object]"===Object.prototype.toString.call(arguments[i][key])?arguments[0][key]=deepAssign(arguments[0][key]||{},arguments[i][key]):arguments[0][key]=arguments[i][key];return arguments[0]}};function Plugin(element,options){plugin.this=this,plugin.element=element,plugin.defaults=defaults,plugin.options=options,plugin.settings=deepMerge(defaults,options),plugin.this.init()}Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(s){var el=this,ancestor=this;if(!document.documentElement.contains(el))return null;do{if(ancestor.matches(s))return ancestor;ancestor=ancestor.parentElement}while(null!==ancestor);return null});var accordionIconSetup=function accordionIconSetup(toggle){var toggleBtn=toggle;if(!0===plugin.settings.icons){var iconContainer=document.createElement("span");iconContainer.classList.add(plugin.settings.iconsSymbol),iconContainer.classList.add(plugin.settings.iconsPosition),toggle.appendChild(iconContainer)}else toggleBtn.classList.add("icon-hidden")},accordionContentSetup=function accordionContentSetup(content,id){var accordionPanel=content.querySelector(".".concat(plugin.settings.panelClass)),accordionContent=document.createElement("div");accordionContent.className=plugin.settings.contentClass,accordionContent.innerHTML=accordionPanel.innerHTML,accordionPanel.innerHTML="",accordionPanel.appendChild(accordionContent),accordionPanel.setAttribute("id","accordion".concat(id)),!1===plugin.settings.expanded?(accordionPanel.setAttribute("aria-hidden","true"),accordionPanel.style.height="0px"):(accordionPanel.setAttribute("aria-hidden","false"),accordionPanel.style.height="".concat(accordionPanel.scrollHeight,"px"))},accordionToggleSetup=function accordionToggleSetup(content,btnId){var accordionHeader=content.querySelector(".".concat(plugin.settings.headerClass)),toggle=document.createElement("button");toggle.className=plugin.settings.toggleBtnClass,toggle.setAttribute("aria-controls","accordion".concat(btnId)),!1===plugin.settings.expanded?toggle.setAttribute("aria-expanded","false"):toggle.setAttribute("aria-expanded","true"),toggle.innerHTML=accordionHeader.innerHTML,accordionHeader.innerHTML="",accordionHeader.appendChild(toggle),accordionContentSetup(content,btnId),accordionIconSetup(toggle)},toggleAllSetup=function toggleAllSetup(){var firstAccordion=document.querySelector(".".concat(plugin.settings.accordionClass));if(firstAccordion){var buttonContainer=document.createElement("div");buttonContainer.className=plugin.settings.expandAllContainerClass;var button=document.createElement("button"),parentContainer;button.className=plugin.settings.expandAllClass,!1===plugin.settings.expanded?(button.setAttribute("aria-expanded","false"),button.textContent=plugin.settings.expandAllOpenText):(button.setAttribute("aria-expanded","true"),button.textContent=plugin.settings.expandAllCloseText),buttonContainer.appendChild(button),firstAccordion.parentNode.insertBefore(buttonContainer,firstAccordion)}},toggleButton=function toggleButton(targetElem,direction){"expand"===direction?targetElem.setAttribute("aria-expanded","true"):targetElem.setAttribute("aria-expanded","false")},toggleAccordion=function toggleAccordion(targetElem,event,direction){var controls=targetElem.getAttribute("aria-controls"),controlsElem=document.getElementById(controls),controlsElemHeight=controlsElem.scrollHeight,toggled=controlsElem.getAttribute("aria-hidden");function timeoutSet(element){setTimeout((function(){element.style.height="auto"}),300)}event&&event.preventDefault(),"expand"===direction&&"true"===toggled?(controlsElem.style.height="".concat(controlsElemHeight,"px"),controlsElem.setAttribute("aria-hidden","false"),timeoutSet(controlsElem)):"collapse"===direction&&"false"===toggled&&(controlsElem.style.height="".concat(controlsElem.scrollHeight,"px"),controlsElem.setAttribute("aria-hidden","true"),setTimeout((function(){controlsElem.setAttribute("aria-hidden",!0),controlsElem.style.height="".concat(0,"px")}),50)),toggleButton(targetElem,direction)},toggleAllAccordions=function toggleAllAccordions(targetElem,event,direction){event&&event.preventDefault();var buttons=document.querySelectorAll(".".concat(plugin.settings.toggleBtnClass));Array.prototype.forEach.call(buttons,(function(button){toggleAccordion(button,event,direction)})),targetElem.setAttribute("aria-expanded","true"===targetElem.getAttribute("aria-expanded")?"false":"true"),targetElem.textContent=targetElem.textContent===plugin.settings.expandAllOpenText?targetElem.textContent=plugin.settings.expandAllCloseText:targetElem.textContent=plugin.settings.expandAllOpenText},clickHandler=function clickHandler(event){var toggleBtn=event.target.closest(".".concat(plugin.settings.toggleBtnClass)),toggleAll=event.target.closest(".".concat(plugin.settings.expandAllClass)),direction="true"===event.target.getAttribute("aria-expanded")?"collapse":"expand";toggleBtn&&toggleAccordion(toggleBtn,event,direction),toggleAll&&toggleAllAccordions(toggleAll,event,direction)},keyboardHandler=function keyboardHandler(event){if("Enter"==event.key||" "==event.key){event.preventDefault();var toggleBtn=event.target.closest(".".concat(plugin.settings.toggleBtnClass)),toggleAll=event.target.closest(".".concat(plugin.settings.expandAllClass)),direction="true"===event.target.getAttribute("aria-expanded")?"collapse":"expand";toggleBtn&&toggleAccordion(toggleBtn,event,direction),toggleAll&&toggleAllAccordions(toggleAll,event,direction)}};return Plugin.prototype={setup:function setup(){var accordions=document.querySelectorAll(plugin.element),btnId=0;Array.prototype.forEach.call(accordions,(function(accordion){accordionToggleSetup(accordion,btnId+=1)})),plugin.settings.expandAllBtn&&accordions.length>1&&toggleAllSetup()},init:function init(){if(!plugin.element)return!1;plugin.this.setup(),document.addEventListener("click",clickHandler,!1),document.addEventListener("keydown",keyboardHandler,!1)}},Plugin}));