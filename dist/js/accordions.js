!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SuperSimpleAccordions=t():e.SuperSimpleAccordions=t()}(self,(function(){return(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{SuperSimpleAccordions:()=>p});
/*!
 * Deep merge two or more objects into the first.
 * (c) 2019 Chris Ferdinandi, MIT License, https://gomakethings.com
 * @param   {Object} objects  The objects to merge together
 * @returns {Object}          Merged values of defaults and options
 */
var n=function e(){var t=arguments.length;if(!(t<1)){if(t<2)return arguments[0];for(var n=1;n<t;n++)for(var a in arguments[n])"[object Object]"===Object.prototype.toString.call(arguments[n][a])?arguments[0][a]=e(arguments[0][a]||{},arguments[n][a]):arguments[0][a]=arguments[n][a];return arguments[0]}},a={},s={accordionClass:"accordion",headerClass:"accordion__title",contentClass:"accordion__content",panelClass:"accordion__panel",toggleBtnClass:"accordion__toggle",icons:!0,iconsSymbol:"plus-minus",iconsPosition:"left",expandAllBtn:!0,expandAllClass:"accordion__toggle-all",expandAllContainerClass:"accordion__toggle-all-container",expandSelectClass:"expanded",expandAllOpenText:"Expand All",expandAllCloseText:"Collapse All",expanded:!1};function o(e,t){a.this=this,a.element=e,a.defaults=s,a.options=t,a.settings=n(s,t),a.this.init()}var i=function(e,t){var n=e.querySelector(".".concat(a.settings.headerClass)),s=e.dataset.expanded;if(n){var o=document.createElement("button");o.className=a.settings.toggleBtnClass,o.setAttribute("aria-controls","accordion".concat(t)),!1===a.settings.expanded&&o.setAttribute("aria-expanded","false"),!0!==a.settings.expanded&&"true"!==s||o.setAttribute("aria-expanded","true"),o.innerHTML=n.innerHTML,n.innerHTML="",n.appendChild(o),function(e,t){var n=e.querySelector(".".concat(a.settings.panelClass)),s=e.dataset.expanded;if(n){var o=document.createElement("div");o.className=a.settings.contentClass,o.innerHTML=n.innerHTML,n.innerHTML="",n.appendChild(o),n.setAttribute("id","accordion".concat(t)),!1===a.settings.expanded&&"true"!=s&&(n.setAttribute("aria-hidden","true"),n.setAttribute("hidden",""),n.style.height="0px"),"true"===s&&(n.setAttribute("aria-hidden","false"),n.removeAttribute("hidden"),n.style.height="".concat(n.scrollHeight,"px"))}}(e,t),function(e){var t=e;if(!0===a.settings.icons){var n=document.createElement("span");n.classList.add(a.settings.iconsSymbol),n.classList.add(a.settings.iconsPosition),e.appendChild(n)}else t.classList.add("icon-hidden")}(o)}},r=function(){var e=document.querySelector(".".concat(a.settings.accordionClass));if(e){var t=document.createElement("div");t.className=a.settings.expandAllContainerClass;var n=document.createElement("button");n.className=a.settings.expandAllClass,!1===a.settings.expanded?(n.setAttribute("aria-expanded","false"),n.textContent=a.settings.expandAllOpenText):(n.setAttribute("aria-expanded","true"),n.textContent=a.settings.expandAllCloseText),t.appendChild(n),e.parentNode.insertBefore(t,e)}},l=function(e,t,n){var a,s=e.getAttribute("aria-controls"),o=document.getElementById(s),i=(o.scrollHeight,o.getAttribute("aria-hidden"));t&&t.preventDefault(),"expand"===n&&"true"===i?(o.removeAttribute("hidden"),o.style.height="".concat(o.scrollHeight,"px"),o.setAttribute("aria-hidden","false"),a=o,setTimeout((function(){a.style.height="auto"}),300)):"collapse"===n&&"false"===i&&(o.style.height="".concat(o.scrollHeight,"px"),o.setAttribute("aria-hidden","true"),setTimeout((function(){o.setAttribute("aria-hidden",!0),o.style.height="".concat(0,"px")}),50),setTimeout((function(){o.setAttribute("hidden","")}),450)),function(e,t){"expand"===t?e.setAttribute("aria-expanded","true"):e.setAttribute("aria-expanded","false")}(e,n)},c=function(e,t,n){t&&t.preventDefault();var s=document.querySelectorAll(".".concat(a.settings.toggleBtnClass));Array.prototype.forEach.call(s,(function(e){l(e,t,n)})),e.setAttribute("aria-expanded","true"===e.getAttribute("aria-expanded")?"false":"true"),e.textContent=e.textContent===a.settings.expandAllOpenText?e.textContent=a.settings.expandAllCloseText:e.textContent=a.settings.expandAllOpenText},d=function(e){var t=e.target.closest(".".concat(a.settings.toggleBtnClass)),n=e.target.closest(".".concat(a.settings.expandAllClass));if(null!==t||null!==n){if(t){var s="true"===e.target.closest(".".concat(a.settings.toggleBtnClass)).getAttribute("aria-expanded")?"collapse":"expand";l(t,e,s)}if(n){var o="true"===e.target.closest(".".concat(a.settings.expandAllClass)).getAttribute("aria-expanded")?"collapse":"expand";c(n,e,o)}}},u=function(e){if("Enter"==e.key||" "==e.key){var t=e.target.closest(".".concat(a.settings.toggleBtnClass)),n=e.target.closest(".".concat(a.settings.expandAllClass)),s="true"===e.target.getAttribute("aria-expanded")?"collapse":"expand";t&&(e.preventDefault(),l(t,e,s)),n&&(e.preventDefault(),c(n,e,s))}};o.prototype={nestedSetup:function(e,t){var n=0;Array.prototype.forEach.call(e,(function(e){n=Math.floor(1e8*Math.random()+1),i(e,n)})),a.this.nonestedSetup(t,n)},nonestedSetup:function(e,t){Array.prototype.forEach.call(e,(function(e){t=Math.floor(1e8*Math.random()+1),i(e,t)}))},setup:function(){var e=document.querySelectorAll(".".concat(a.settings.panelClass," > ").concat(a.element)),t=document.querySelectorAll(a.element);if(e.length>0)return a.this.nestedSetup(e,t),void(a.settings.expandAllBtn&&t.length>1&&r());if(t){return a.this.nonestedSetup(t,0),void(a.settings.expandAllBtn&&t.length>1&&r())}},init:function(){if(!a.element)return!1;a.this.setup(),document.addEventListener("click",d,!1),document.addEventListener("keydown",u,!1)}};const p=o;return t})()}));