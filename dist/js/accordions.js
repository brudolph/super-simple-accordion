!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SuperSimpleAccordions=e():t.SuperSimpleAccordions=e()}(self,(()=>(()=>{"use strict";var t={d:(e,n)=>{for(var a in n)t.o(n,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:n[a]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{SuperSimpleAccordions:()=>g});
/*!
 * Deep merge two or more objects into the first.
 * (c) 2019 Chris Ferdinandi, MIT License, https://gomakethings.com
 * @param   {Object} objects  The objects to merge together
 * @returns {Object}          Merged values of defaults and options
 */
var n=function t(){var e=arguments.length;if(!(e<1)){if(e<2)return arguments[0];for(var n=1;n<e;n++)for(var a in arguments[n])"[object Object]"===Object.prototype.toString.call(arguments[n][a])?arguments[0][a]=t(arguments[0][a]||{},arguments[n][a]):arguments[0][a]=arguments[n][a];return arguments[0]}},a={},s={accordionClass:"accordion",headerClass:"accordion__title",contentClass:"accordion__content",panelClass:"accordion__panel",hidden:!0,toggleBtnClass:"accordion__toggle",toggleOthers:!1,icons:!0,iconsSymbol:"plus-minus",iconsPosition:"left",expandAllBtn:!0,expandAllClass:"accordion__toggle-all",expandAllContainerClass:"accordion__toggle-all-container",expandSelectClass:"expanded",expandAllOpenText:"Expand All",expandAllCloseText:"Collapse All",expanded:!1};function i(t,e){a.this=this,a.element=t,a.defaults=s,a.options=e,a.settings=n(s,e),a.this.init()}var o=function(t,e){var n=t.querySelector(".".concat(a.settings.headerClass)),s=t.dataset.expanded;if(n){var i=document.createElement("button");i.className=a.settings.toggleBtnClass,i.setAttribute("aria-controls","accordion".concat(e)),!1===a.settings.expanded&&i.setAttribute("aria-expanded","false"),!0!==a.settings.expanded&&"true"!==s||i.setAttribute("aria-expanded","true"),i.innerHTML=n.innerHTML,n.innerHTML="",n.appendChild(i),function(t,e){var n=t.querySelector(".".concat(a.settings.panelClass)),s=t.dataset.expanded;if(n){var i,o=document.createElement("div");o.className=a.settings.contentClass,o.innerHTML=n.innerHTML,n.innerHTML="",n.appendChild(o),n.setAttribute("id","accordion".concat(e)),!1===a.settings.expanded&&"true"!=s&&(n.setAttribute("aria-hidden","true"),n.setAttribute("hidden",""),n.style.height="0px"),"true"===s&&(n.setAttribute("aria-hidden","false"),n.removeAttribute("hidden"),n.style.height="".concat(n.scrollHeight,"px"),i=n,setTimeout((function(){i.style.height="auto"}),300))}}(t,e),function(t){var e=t;if(!0===a.settings.icons){var n=document.createElement("span");n.classList.add(a.settings.iconsSymbol),n.classList.add(a.settings.iconsPosition),t.appendChild(n)}else e.classList.add("icon-hidden")}(i)}},r=function(){var t=document.querySelector(".".concat(a.settings.accordionClass));if(t){var e=document.createElement("div");e.className=a.settings.expandAllContainerClass;var n=document.createElement("button");n.className=a.settings.expandAllClass,!1===a.settings.expanded?(n.setAttribute("aria-expanded","false"),n.textContent=a.settings.expandAllOpenText):(n.setAttribute("aria-expanded","true"),n.textContent=a.settings.expandAllCloseText),e.appendChild(n),t.parentNode.insertBefore(e,t)}},l=function(t,e){"expand"===e?t.setAttribute("aria-expanded","true"):t.setAttribute("aria-expanded","false")},c=function(t,e,n,s){var i=t.getAttribute("aria-controls"),o=document.getElementById(i),r=(o.scrollHeight,o.getAttribute("aria-hidden"));e&&e.preventDefault();var c,d=t.closest(".".concat(a.settings.panelClass));if(a.settings.toggleOthers&&!d&&!s){var u=document.querySelectorAll(".".concat(a.settings.toggleBtnClass));Array.prototype.forEach.call(u,(function(t){var e=t.getAttribute("aria-controls"),n=document.getElementById(e);"false"===n.getAttribute("aria-hidden")&&(n.style.height="".concat(n.scrollHeight,"px"),n.setAttribute("aria-hidden","true"),setTimeout((function(){n.setAttribute("aria-hidden",!0),n.style.height="".concat(0,"px")}),50),setTimeout((function(){a.settings.hidden&&n.setAttribute("hidden","")}),450),l(t,"collapse"))}))}"expand"===n&&"true"===r?(o.removeAttribute("hidden"),o.style.height="".concat(o.scrollHeight,"px"),o.setAttribute("aria-hidden","false"),c=o,setTimeout((function(){c.style.height="auto"}),300)):"collapse"===n&&"false"===r&&(o.style.height="".concat(o.scrollHeight,"px"),o.setAttribute("aria-hidden","true"),setTimeout((function(){o.setAttribute("aria-hidden",!0),o.style.height="".concat(0,"px")}),50),setTimeout((function(){a.settings.hidden&&o.setAttribute("hidden","")}),450)),l(t,n)},d=function(t,e,n){e&&e.preventDefault();var s=document.querySelectorAll(".".concat(a.settings.toggleBtnClass));Array.prototype.forEach.call(s,(function(t){c(t,e,n,!0)})),t.setAttribute("aria-expanded","true"===t.getAttribute("aria-expanded")?"false":"true"),t.textContent=t.textContent===a.settings.expandAllOpenText?t.textContent=a.settings.expandAllCloseText:t.textContent=a.settings.expandAllOpenText},u=function(t){var e=t.target.closest(".".concat(a.settings.toggleBtnClass)),n=t.target.closest(".".concat(a.settings.expandAllClass));if(null!==e||null!==n){if(e){var s="true"===t.target.closest(".".concat(a.settings.toggleBtnClass)).getAttribute("aria-expanded")?"collapse":"expand";c(e,t,s)}if(n){var i="true"===t.target.closest(".".concat(a.settings.expandAllClass)).getAttribute("aria-expanded")?"collapse":"expand";d(n,t,i)}}},p=function(t){if("Enter"==t.key||" "==t.key){var e=t.target.closest(".".concat(a.settings.toggleBtnClass)),n=t.target.closest(".".concat(a.settings.expandAllClass)),s="true"===t.target.getAttribute("aria-expanded")?"collapse":"expand";e&&(t.preventDefault(),c(e,t,s)),n&&(t.preventDefault(),d(n,t,s))}};i.prototype={nestedSetup:function(t,e){var n=0;Array.prototype.forEach.call(t,(function(t){n=Math.floor(1e8*Math.random()+1),o(t,n)})),a.this.nonestedSetup(e,n)},nonestedSetup:function(t,e){Array.prototype.forEach.call(t,(function(t){e=Math.floor(1e8*Math.random()+1),o(t,e)}))},setup:function(){var t=document.querySelectorAll(".".concat(a.settings.panelClass," > ").concat(a.element)),e=document.querySelectorAll(a.element);if(t.length>0)return a.this.nestedSetup(t,e),void(a.settings.expandAllBtn&&e.length>1&&r());if(e){return a.this.nonestedSetup(e,0),void(a.settings.expandAllBtn&&e.length>1&&r())}},init:function(){if(!a.element)return!1;a.this.setup(),document.addEventListener("click",u,!1),document.addEventListener("keydown",p,!1)}};const g=i;return e})()));